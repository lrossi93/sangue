<h3 mat-dialog-title>Add a new forecast</h3>

<div mat-dialog-content>
	<p>
		<mat-form-field>
			<input
			placeholder="Anno"
			[formControl]="anno"
			matInput>
		</mat-form-field>
	</p>
	<!--autocomplete dropdown for USERS-->
	<form *ngIf="loginService.getUserCode()=='220'">
		<mat-form-field>
			<input 
			type="text"
			placeholder="Utente"
			matInput
			[formControl]="userFormControl"
			[matAutocomplete]="auto">
			<mat-autocomplete #auto="matAutocomplete">
			<mat-option *ngFor="let optionU of filteredUsers | async" [value]="optionU" (onSelectionChange)='onUserSelected($event)'>
				{{ optionU }}
			</mat-option>
			</mat-autocomplete>
		</mat-form-field>
	</form>

	<!--autocomplete dropdown for PRODUCTS-->
	<form>
		<mat-form-field>
			<input 
			type="text"
			placeholder="Prodotto"
			matInput
			[formControl]="productFormControl"
			[matAutocomplete]="auto">
			<mat-autocomplete #auto="matAutocomplete">
			<mat-option *ngFor="let optionP of filteredProducts | async" [value]="optionP" (onSelectionChange)='onProductSelected($event)'>
				{{ optionP }}
			</mat-option>
			</mat-autocomplete>
		</mat-form-field>
	</form>
	
	<p>
		<mat-form-field>
			<input
			type="number"
			placeholder="Quantità"
			[formControl]="qta"
			matInput>
		</mat-form-field>
	</p>
	<p>
		<mat-form-field>
			<textarea
			placeholder="Note"
			[formControl]="note"
			matInput></textarea>
		</mat-form-field>
	</p>
	<p>
		<mat-form-field *ngIf="loginService.getUserCode() == '220'">
			<input
			type="number"
			placeholder="Quantità approvata"
			[formControl]="qta_approvata"
			matInput>
		</mat-form-field>
	</p>
	<p>
		<mat-form-field *ngIf="loginService.getUserCode() == '220'">
			<input
			type="number"
			placeholder="Costo unitario"
			[formControl]="costo_unitario"
			matInput>
		</mat-form-field>
	</p>
</div>

<div mat-form-actions>
	<button mat-raised-button (click)="onSubmit()">Submit</button>
	<button mat-raised-button mat-dialog-close color="primary">Cancel</button>
</div>