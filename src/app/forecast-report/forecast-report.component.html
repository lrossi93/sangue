<div
class="second-nav">
    <h1>{{ "Forecast reports" | translate }}</h1>
</div>


<div 
align="center"
class="container">
    <!--p>
        <mat-form-field 
        style="width: 50%"
        align="center"
        *ngIf="loginService.getUserCode()=='220'">
            <input 
            align="center"
            type="text"
            placeholder="{{ 'User' | translate }}"
            matInput
            style="width: 100%"
            [formControl]="userFormControl"
            [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of filteredUsers | async" [value]="option" (onSelectionChange)='onUserSelected($event)' onchange="">
                {{ option }}
            </mat-option>
            </mat-autocomplete>
        </mat-form-field>
    </p-->
    <p>
        <mat-form-field 
        style="width: 50%"
        align="center"
        *ngIf="loginService.getUserCode() == '220'"
        appearance="fill">
            <mat-label>{{'User' | translate}}</mat-label>
            <mat-select
            [(value)]="selectedUser"
            (selectionChange)="username = getUserId($event)">
                <mat-option 
                *ngFor="let user of users" 
                [value]="user.client">
                {{user.client}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </p>
    <p>
        {{ "Reference year" | translate }}: 
        <input
        matInput
        style="width: 50px"
        type="number"
        [(ngModel)]="year"
        >
    </p>
    <p>
        <button
        mat-fab
        class="mat-elevation-z0"
        style="margin: 5px;"
        color="warn"
        (click)="getReport(username, year)"
        matTooltip="{{'View report' | translate}}">
            <i class="material-icons">picture_as_pdf</i>
        </button>
    </p>
</div>    


<footer>
	<p 
	*ngIf="loginService.getUsername() != null"
	align="center">
		{{ 'Logged as' | translate }} <b>{{ loginService.currentUser.client }}</b>.
	</p>
	<p 
	*ngIf="loginService.getUsername() == null"
	align="center">
		{{ 'You\'re not logged!' | translate }} <a [routerLink]="['/login']">{{ 'Login' | translate }}</a>
	</p>	
</footer>
